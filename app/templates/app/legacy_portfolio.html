{% extends 'base.html' %}
{% load static %}
{% block content %}

{% block title %}
<title>Explore Kenya Safaris | Raw & Unwind Luxury Safari Experiences</title>
{% endblock %}

{% block meta_description %}
<meta name="description"
    content="Discover unforgettable safari adventures in Kenya with Raw & Unwind Safaris. Explore Nairobi, Maasai homesteads, Lake Victoria, and coastal treasures.">
{% endblock %}

<section class="relative w-full h-[50vh] overflow-hidden">

    <!-- Background image -->
    <div class="absolute inset-0">
        <img src="{% static 'images/blogs/2.webp' %}" alt="About Raw Unwind Safaris"
            class="w-full h-full object-cover" />
    </div>
    <div class="absolute inset-0 bg-black/50"></div>
    <div class="relative z-10 h-full flex items-center justify-center px-6 text-center">
        <div class="max-w-3xl">
            <h1 class="font-display text-4xl lg:text-6xl font-bold mb-6 text-[#faf8f3]">
                Legacy Portfolio
            </h1>

            <p class="text-lg lg:text-xl mb-8 text-[#f0ebe0] leading-relaxed">
                Explore Kenya Safaris | Raw & Unwind Luxury Safari Experiences
            </p>
        </div>
    </div>

</section>

<section id="legacy-portfolio" class="w-full px-6 py-20 md:py-24">
    <div class="max-w-7xl mx-auto">

        <!-- Spinner -->
        <div id="portfolio-spinner" class="flex justify-center mb-8">
            <div class="loader border-t-4 border-b-4 border-green-700 rounded-full w-12 h-12 animate-spin"></div>
        </div>

        <!-- Dynamic results -->
        <div id="legacy-portfolio-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
        </div>

    </div>
</section>


<script>
    document.addEventListener("DOMContentLoaded", () => {
        const spinner = document.getElementById("portfolio-spinner");
        const container = document.getElementById("legacy-portfolio-container");

        fetch("/api/legacy-portfolio/")
            .then(res => res.json())
            .then(data => {
                spinner.classList.add("hidden");
                container.classList.remove("hidden");

                if (!data.length) {
                    container.innerHTML = `
                    <p class="col-span-3 text-center text-gray-600">
                        No portfolio items available.
                    </p>`;
                    return;
                }

                container.innerHTML = data.map(item => `
                <div class="p-6 rounded-2xl card-hover bg-[#faf8f3]">

                    <img src="${item.image}"
                         alt="${item.title}"
                         class="w-full h-48 object-cover rounded-2xl mb-4">

                    <h4 class="font-display text-xl font-bold mb-2 text-[#1a4d2e]">
                        ${item.title}
                    </h4>

                    <p class="text-sm mb-3 text-[#3d5a46]">
                        ${item.content}
                    </p>

                    <div class="flex items-center justify-between">
                        <p class="font-display text-2xl font-bold text-[#1a4d2e]">
                            ${item.currency} ${item.price}
                            <span class="text-sm font-normal">pp</span>
                        </p>

                        <a href="${item.url}"
                           class="text-sm font-semibold text-[#1a4d2e] underline">
                            View Details
                        </a>
                    </div>

                </div>
            `).join("");
            })
            .catch(err => {
                spinner.classList.add("hidden");
                container.innerHTML = `
                <p class="text-red-600 text-center col-span-3">
                    Failed to load portfolio.
                </p>`;
                console.error(err);
            });
    });
</script>

{% endblock content %}